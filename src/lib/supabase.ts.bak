import { createClient } from '@supabase/supabase-js';

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || '';
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || '';

export const supabase = createClient(supabaseUrl, supabaseAnonKey);

// Types for database tables
export interface Employee {
  id: string;
  employee_id: string;
  name: string;
  email: string;
  phone: string;
  position: string;
  department: string;
  blood_type?: string;
  emergency_contact?: string;
  emergency_phone?: string;
  hire_date: string;
  status: string;
  created_at: string;
  updated_at: string;
}

export interface AttendanceRecord {
  id: string;
  employee_id: string;
  type: 'clock_in' | 'clock_out';
  timestamp: string;
  location?: string;
  signature_data?: string;
  notes?: string;
  latitude?: number;
  longitude?: number;
  created_at: string;
}

export interface HealthRecord {
  id: string;
  employee_id: string;
  systolic_pressure: number;
  diastolic_pressure: number;
  heart_rate: number;
  temperature: number;
  weight?: number;
  symptoms?: string;
  medications?: string;
  checkup_date: string;
  created_by?: string;
  created_at: string;
}

export interface SafetyReport {
  id: string;
  incident_type: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  location: string;
  description: string;
  reporter_name: string;
  reporter_employee_id?: string;
  witnesses?: string;
  immediate_action?: string;
  status: 'investigating' | 'resolved' | 'pending';
  incident_date: string;
  resolved_date?: string;
  created_at: string;
  updated_at: string;
}

export interface TrainingSession {
  id: string;
  title: string;
  description: string;
  trainer: string;
  training_type: string;
  scheduled_date: string;
  duration_hours: number;
  location: string;
  max_participants: number;
  status: 'scheduled' | 'ongoing' | 'completed' | 'cancelled';
  created_at: string;
  updated_at: string;
}

export interface Equipment {
  id: string;
  equipment_id: string;
  name: string;
  type: string;
  manufacturer?: string;
  model?: string;
  serial_number?: string;
  purchase_date?: string;
  location: string;
  status: 'operational' | 'maintenance_needed' | 'out_of_service';
  created_at: string;
  updated_at: string;
}

export interface EquipmentInspection {
  id: string;
  equipment_id: string;
  inspector_name: string;
  inspector_employee_id?: string;
  inspection_type: 'routine' | 'preventive' | 'corrective' | 'emergency';
  inspection_date: string;
  condition: 'excellent' | 'good' | 'fair' | 'poor';
  issues_found?: string;
  maintenance_needed?: string;
  next_inspection_date: string;
  signature_data?: string;
  created_at: string;
}